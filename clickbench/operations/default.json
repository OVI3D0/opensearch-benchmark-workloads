    {
      "name": "index-append",
      "operation-type": "bulk",
      "bulk-size": {{bulk_size | default(5000)}},
      "ingest-percentage": {{ingest_percentage | default(100)}}
    },
    {
      "name": "flush-index",
      "operation-type": "raw-request",
      "path": "/{{ index_name | default('clickbench') }}/_flush",
      "method": "POST"
    },
    {
      "name": "q01-count-all",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | stats count() as total_docs"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 1
        },
        {
          "property": "rows.0.total_docs",
          "condition": "==",
          "value": 99997497
        }
      ]
    },
    {
      "name": "q02-count-adv-engine",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | where AdvEngineID!=0 | stats count()"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 1
        },
        {
          "property": "rows.0.count()",
          "condition": "==",
          "value": 630500
        }
      ]
    },
    {
      "name": "q03-sum-count-avg",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | stats sum(AdvEngineID), count(), avg(ResolutionWidth)"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 1
        },
        {
          "property": "rows.0.sum(AdvEngineID)",
          "condition": "==",
          "value": 7280088
        },
        {
          "property": "rows.0.count()",
          "condition": "==",
          "value": 99997497
        },
        {
          "property": "rows.0.avg(ResolutionWidth)",
          "condition": "==",
          "value": 1513.4879349030107
        }
      ]
    },
    {
      "name": "q04-avg-userid",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | stats avg(UserID)"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 1
        },
        {
          "property": "rows.0.avg(UserID)",
          "condition": "==",
          "value": 2.528953029789716e+18
        }
      ]
    },
    {
      "name": "q05-distinct-userid",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | stats dc(UserID)"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 1
        },
        {
          "property": "rows.0.dc(UserID)",
          "condition": "==",
          "value": 17466697
        }
      ]
    },
    {
      "name": "q06-distinct-searchphrase",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | stats dc(SearchPhrase)"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 1
        },
        {
          "property": "rows.0.dc(SearchPhrase)",
          "condition": "==",
          "value": 6017845
        }
      ]
    },
    {
      "name": "q07-min-max-eventdate",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | stats min(EventDate), max(EventDate)"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 1
        },
        {
          "property": "rows.0.min(EventDate)",
          "condition": "==",
          "value": "2013-07-02 00:00:00"
        },
        {
          "property": "rows.0.max(EventDate)",
          "condition": "==",
          "value": "2013-07-31 00:00:00"
        }
      ]
    },
    {
      "name": "q08-group-by-adv-engine",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | where AdvEngineID!=0 | stats count() by AdvEngineID bucket_nullable=false | sort - `count()`"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 18
        },
        {
          "property": "rows.0.count()",
          "condition": "==",
          "value": 404602
        },
        {
          "property": "rows.0.AdvEngineID",
          "condition": "==",
          "value": 2
        }
      ]
    },
    {
      "name": "q09-region-users",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | stats dc(UserID) as u by RegionID bucket_nullable=false | sort -u | head 10"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 10
        },
        {
          "property": "rows.0.u",
          "condition": "==",
          "value": 2826010
        },
        {
          "property": "rows.0.RegionID",
          "condition": "==",
          "value": 229
        }
      ]
    },
    {
      "name": "q10-region-stats",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | stats sum(AdvEngineID), count() as c, avg(ResolutionWidth), dc(UserID) by RegionID bucket_nullable=false | sort - c | head 10"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 10
        },
        {
          "property": "rows.0.sum(AdvEngineID)",
          "condition": "==",
          "value": 2077656
        },
        {
          "property": "rows.0.c",
          "condition": "==",
          "value": 18295832
        },
        {
          "property": "rows.0.avg(ResolutionWidth)",
          "condition": "==",
          "value": 1506.085243130785
        }
      ]
    },
    {
      "name": "q11-mobile-phone-model",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | where MobilePhoneModel != '' | stats dc(UserID) as u by MobilePhoneModel bucket_nullable=false | sort - u | head 10"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 10
        },
        {
          "property": "rows.0.u",
          "condition": "==",
          "value": 1090671
        },
        {
          "property": "rows.0.MobilePhoneModel",
          "condition": "==",
          "value": "iPad"
        }
      ]
    },
    {
      "name": "q12-mobile-phone-stats",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | where MobilePhoneModel != '' | stats dc(UserID) as u by MobilePhone, MobilePhoneModel bucket_nullable=false | sort - u | head 10"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 10
        },
        {
          "property": "rows.0.u",
          "condition": "==",
          "value": 395
        },
        {
          "property": "rows.0.MobilePhone",
          "condition": "==",
          "value": 60
        },
        {
          "property": "rows.0.MobilePhoneModel",
          "condition": "==",
          "value": "308"
        }
      ]
    },
    {
      "name": "q13-search-phrase-count",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | where SearchPhrase != '' | stats count() as c by SearchPhrase bucket_nullable=false | sort - c | head 10"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 10
        },
        {
          "property": "rows.0.c",
          "condition": "==",
          "value": 383
        },
        {
          "property": "rows.0.SearchPhrase",
          "condition": "==",
          "value": "'kbnysq ctrcfylhtq d vfrcbvev"
        }
      ]
    },
    {
      "name": "q14-search-phrase-users",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | where SearchPhrase != '' | stats dc(UserID) as u by SearchPhrase bucket_nullable=false | sort - u | head 10"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 10
        },
        {
          "property": "rows.0.u",
          "condition": "==",
          "value": 336
        },
        {
          "property": "rows.0.SearchPhrase",
          "condition": "==",
          "value": "'kbnysq ctrcfylhtq d vfrcbvev"
        }
      ]
    },
    {
      "name": "q15-search-engine-phrase",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | where SearchPhrase != '' | stats count() as c by SearchEngineID, SearchPhrase bucket_nullable=false | sort - c | head 10"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 10
        },
        {
          "property": "rows.0.c",
          "condition": "==",
          "value": 44
        },
        {
          "property": "rows.0.SearchEngineID",
          "condition": "==",
          "value": 1
        },
        {
          "property": "rows.0.SearchPhrase",
          "condition": "==",
          "value": "asrock antasy xv"
        }
      ]
    },
    {
      "name": "q16-user-activity",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | stats count() by UserID bucket_nullable=false | sort - `count()` | head 10"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 10
        },
        {
          "property": "rows.0.count()",
          "condition": "==",
          "value": 357
        },
        {
          "property": "rows.0.UserID",
          "condition": "==",
          "value": -9220031997633870766
        }
      ]
    },
    {
      "name": "q17-user-search-activity",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | stats count() by UserID, SearchPhrase bucket_nullable=false | sort - `count()` | head 10"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 10
        },
        {
          "property": "rows.0.count()",
          "condition": "==",
          "value": 357
        },
        {
          "property": "rows.0.UserID",
          "condition": "==",
          "value": -9220031997633870766
        },
        {
          "property": "rows.0.SearchPhrase",
          "condition": "==",
          "value": ""
        }
      ]
    },
    {
      "name": "q18-user-search-limit",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | stats count() by UserID, SearchPhrase bucket_nullable=false | head 10"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 10
        },
        {
          "property": "rows.0.count()",
          "condition": "==",
          "value": 7
        },
        {
          "property": "rows.0.UserID",
          "condition": "==",
          "value": -9223361817928421363
        },
        {
          "property": "rows.0.SearchPhrase",
          "condition": "==",
          "value": ""
        }
      ]
    },
    {
      "name": "q19-user-minute-search",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | eval m = extract(minute from EventTime) | stats count() by UserID, m, SearchPhrase bucket_nullable=false | sort - `count()` | head 10"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 10
        },
        {
          "property": "rows.0.count()",
          "condition": "==",
          "value": 22
        },
        {
          "property": "rows.0.UserID",
          "condition": "==",
          "value": -9221886956462285029
        },
        {
          "property": "rows.0.m",
          "condition": "==",
          "value": 21
        }
      ]
    },
    {
      "name": "q20-specific-user",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | where UserID = 435090932899640449 | fields UserID"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 4
        },
        {
          "property": "rows.0.UserID",
          "condition": "==",
          "value": 435090932899640449
        }
      ]
    },
    {
      "name": "q21-google-urls",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | where like(URL, '%google%') | stats count()"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 1
        },
        {
          "property": "rows.0.count()",
          "condition": "==",
          "value": 32196
        }
      ]
    },
    {
      "name": "q22-google-search-phrases",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | where like(URL, '%google%') and SearchPhrase != '' | stats count() as c by SearchPhrase bucket_nullable=false | sort - c | head 10"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 10
        },
        {
          "property": "rows.0.c",
          "condition": "==",
          "value": 273
        },
        {
          "property": "rows.0.dc(UserID)",
          "condition": "==",
          "value": 236
        },
        {
          "property": "rows.0.SearchPhrase",
          "condition": "==",
          "value": "\u0432\u0438\u043d\u043a\u0438 \u043c\u0435\u0434\u0432\u0435\u0434\u044c \u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0444\u0438\u043b\u044c\u043c\u044b 2013 \u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c"
        }
      ]
    },
    {
      "name": "q23-google-title-search",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | where like(Title, '%Google%') and not like(URL, '%.google.%') and SearchPhrase != '' | stats count() as c, dc(UserID) by SearchPhrase bucket_nullable=false | sort - c | head 10"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 10
        },
        {
          "property": "rows.0.c",
          "condition": "==",
          "value": 273
        },
        {
          "property": "rows.0.\"dc(UserID)\"",
          "condition": "==",
          "value": 236
        }
      ]
    },
    {
      "name": "q24-google-urls-sorted",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | where like(URL, '%google%') | sort EventTime | head 10"
      },
      "assertions": [
        {
          "property": "rows.0.EventDate",
          "condition": "==",
          "value": "2013-07-02 00:00:00"
        },
        {
          "property": "rows.0.URLRegionID",
          "condition": "==",
          "value": 216
        },
        {
          "property": "rows.0.HasGCLID",
          "condition": "==",
          "value": 0
        }
      ]
    },
    {
      "name": "q25-search-phrases-by-time",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | where SearchPhrase != '' | sort EventTime | fields SearchPhrase | head 10"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 10
        },
        {
          "property": "rows.0.SearchPhrase",
          "condition": "==",
          "value": "\u0441\u0438\u043c\u043f\u0442\u043e\u043c\u044b \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0432"
        }
      ]
    },
    {
      "name": "q26-search-phrases-sorted",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | where SearchPhrase != '' | fields SearchPhrase | sort SearchPhrase | head 10"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 10
        },
        {
          "property": "rows.0.SearchPhrase",
          "condition": "==",
          "value": " \u0431\u0435\u0440\u0435\u0436"
        }
      ]
    },
    {
      "name": "q27-search-phrases-multi-sort",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | where SearchPhrase != '' | sort EventTime, SearchPhrase | fields SearchPhrase | head 10"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 10
        },
        {
          "property": "rows.0.SearchPhrase",
          "condition": "==",
          "value": "galaxy s4 zoom \u0444\u0438\u043b\u044c\u043c"
        }
      ]
    },
    {
      "name": "q28-counter-url-length",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | where URL != '' | stats avg(length(URL)) as l, count() as c by CounterID bucket_nullable=false | where c > 100000 | sort - l | head 25"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 25
        },
        {
          "property": "rows.0.l",
          "condition": "==",
          "value": 187.9562693941447
        },
        {
          "property": "rows.0.c",
          "condition": "==",
          "value": 323229
        },
        {
          "property": "rows.0.CounterID",
          "condition": "==",
          "value": 1634
        }
      ]
    },
    {
      "name": "q29-referer-analysis",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | Referer != '' | eval k = regexp_replace(Referer, '^https?://(?:www\\.)?([^/]+)/.*$', '\\1') | stats avg(length(Referer)) as l, count() as c, min(Referer) by k bucket_nullable=false | where c > 100000 | sort - l | head 25"
      }
    },
    {
      "name": "q30-resolution-width-sums",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | stats sum(ResolutionWidth), sum(ResolutionWidth+1), sum(ResolutionWidth+2), sum(ResolutionWidth+3), sum(ResolutionWidth+4), sum(ResolutionWidth+5), sum(ResolutionWidth+6), sum(ResolutionWidth+7), sum(ResolutionWidth+8), sum(ResolutionWidth+9)"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 1
        },
        {
          "property": "rows.0.sum(ResolutionWidth)",
          "condition": "==",
          "value": 151345005230
        },
        {
          "property": "rows.0.sum(ResolutionWidth+1)",
          "condition": "==",
          "value": 151445002727
        },
        {
          "property": "rows.0.sum(ResolutionWidth+2)",
          "condition": "==",
          "value": 151545000224
        }
      ]
    },
    {
      "name": "q31-search-engine-client-stats",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | where SearchPhrase != '' | stats count() as c, sum(IsRefresh), avg(ResolutionWidth) by SearchEngineID, ClientIP bucket_nullable=false | sort - c | head 10"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 10
        },
        {
          "property": "rows.0.c",
          "condition": "==",
          "value": 31
        },
        {
          "property": "rows.0.sum(IsRefresh)",
          "condition": "==",
          "value": 3
        },
        {
          "property": "rows.0.avg(ResolutionWidth)",
          "condition": "==",
          "value": 1989.0
        }
      ]
    },
    {
      "name": "q32-watch-client-stats",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | where SearchPhrase != '' | stats count() as c, sum(IsRefresh), avg(ResolutionWidth) by WatchID, ClientIP bucket_nullable=false | sort - c | head 10"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 10
        },
        {
          "property": "rows.0.c",
          "condition": "==",
          "value": 1
        },
        {
          "property": "rows.0.sum(IsRefresh)",
          "condition": "==",
          "value": 0
        },
        {
          "property": "rows.0.avg(ResolutionWidth)",
          "condition": "==",
          "value": 1368.0
        }
      ]
    },
    {
      "name": "q33-watch-client-all",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | stats count() as c, sum(IsRefresh), avg(ResolutionWidth) by WatchID, ClientIP bucket_nullable=false | sort - c | head 10"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 10
        },
        {
          "property": "rows.0.c",
          "condition": "==",
          "value": 1
        },
        {
          "property": "rows.0.sum(IsRefresh)",
          "condition": "==",
          "value": 0
        },
        {
          "property": "rows.0.avg(ResolutionWidth)",
          "condition": "==",
          "value": 1368.0
        }
      ]
    },
    {
      "name": "q34-url-popularity",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | stats count() as c by URL bucket_nullable=false | sort - c | head 10"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 10
        },
        {
          "property": "rows.0.c",
          "condition": "==",
          "value": 67763
        },
        {
          "property": "rows.0.URL",
          "condition": "==",
          "value": ""
        }
      ]
    },
    {
      "name": "q35-url-with-constant",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | eval const = 1 | stats count() as c by const, URL bucket_nullable=false | sort - c | head 10"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 10
        },
        {
          "property": "rows.0.c",
          "condition": "==",
          "value": 67763
        },
        {
          "property": "rows.0.const",
          "condition": "==",
          "value": 1
        },
        {
          "property": "rows.0.URL",
          "condition": "==",
          "value": ""
        }
      ]
    },
    {
      "name": "q36-client-ip-variations",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | eval `ClientIP - 1` = ClientIP - 1, `ClientIP - 2` = ClientIP - 2, `ClientIP - 3` = ClientIP - 3 | stats count() as c by ClientIP, `ClientIP - 1`, `ClientIP - 2`, `ClientIP - 3` bucket_nullable=false | sort - c | head 10"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 10
        },
        {
          "property": "rows.0.c",
          "condition": "==",
          "value": 2799
        },
        {
          "property": "rows.0.ClientIP",
          "condition": "==",
          "value": -2146825212
        },
        {
          "property": "rows.0.ClientIP - 1",
          "condition": "==",
          "value": -2146825213
        }
      ]
    },
    {
      "name": "q37-counter-62-urls",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | where CounterID = 62 and EventDate >= '2013-07-01 00:00:00' and EventDate <= '2013-07-31 00:00:00' and DontCountHits = 0 and IsRefresh = 0 and URL != '' | stats count() as PageViews by URL bucket_nullable=false | sort - PageViews | head 10"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 10
        },
        {
          "property": "rows.0.PageViews",
          "condition": "==",
          "value": 333
        },
        {
          "property": "rows.0.URL",
          "condition": "==",
          "value": "http://afisha.yandex.ua/auto_id=0&with_photo.ashx/101/4/?cat=6257271"
        }
      ]
    },
    {
      "name": "q38-counter-62-titles",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | where CounterID = 62 and EventDate >= '2013-07-01 00:00:00' and EventDate <= '2013-07-31 00:00:00' and DontCountHits = 0 and IsRefresh = 0 and Title != '' | stats count() as PageViews by Title bucket_nullable=false | sort - PageViews | head 10"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 10
        },
        {
          "property": "rows.0.PageViews",
          "condition": "==",
          "value": 39098
        },
        {
          "property": "rows.0.Title",
          "condition": "==",
          "value": "\u0411\u0440\u044e\u043a\u0438 New Era H (\u0410\u0441\u0443\u0441) 258 \u043e\u0431\u0449\u0430\u044f \u0432\u044b\u043f\u043b\u0430\u0442\u043e\u043a, \u0433\u043e\u0440\u0448\u0435\u0447\u043d\u044b\u043c\u0438"
        }
      ]
    },
    {
      "name": "q39-counter-62-links",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | where CounterID = 62 and EventDate >= '2013-07-01 00:00:00' and EventDate <= '2013-07-31 00:00:00' and IsRefresh = 0 and IsLink != 0 and IsDownload = 0 | stats count() as PageViews by URL bucket_nullable=false | sort - PageViews | head 10 from 1000"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 0
        }
      ]
    },
    {
      "name": "q40-traffic-source-analysis",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | where CounterID = 62 and EventDate >= '2013-07-01 00:00:00' and EventDate <= '2013-07-31 00:00:00' and IsRefresh = 0 | eval Src=case(SearchEngineID = 0 and AdvEngineID = 0, Referer else ''), Dst=URL | stats count() as PageViews by TraficSourceID, SearchEngineID, AdvEngineID, Src, Dst bucket_nullable=false | sort - PageViews | head 10 from 1000"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 0
        }
      ]
    },
    {
      "name": "q41-url-hash-date",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | where CounterID = 62 and EventDate >= '2013-07-01 00:00:00' and EventDate <= '2013-07-31 00:00:00' and IsRefresh = 0 and TraficSourceID in (-1, 6) and RefererHash = 3594120000172545465 | stats count() as PageViews by URLHash, EventDate bucket_nullable=false | sort - PageViews | head 10 from 100"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 10
        },
        {
          "property": "rows.0.PageViews",
          "condition": "==",
          "value": 3
        },
        {
          "property": "rows.0.URLHash",
          "condition": "==",
          "value": -9083732271036960698
        },
        {
          "property": "rows.0.EventDate",
          "condition": "==",
          "value": "2013-07-15 00:00:00"
        }
      ]
    },
    {
      "name": "q42-window-client-dimensions",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | where CounterID = 62 and EventDate >= '2013-07-01 00:00:00' and EventDate <= '2013-07-31 00:00:00' and IsRefresh = 0 and DontCountHits = 0 and URLHash = 2868770270353813622 | stats count() as PageViews by WindowClientWidth, WindowClientHeight bucket_nullable=false | sort - PageViews | head 10 from 10000"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 0
        }
      ]
    },
    {
      "name": "q43-hourly-pageviews",
      "operation-type": "ppl-query",
      "path": "/_plugins/_ppl",
      "method": "POST",
      "detailed-results": true,
      "body": {
        "query": "source = {{index_name | default('clickbench')}} | where CounterID = 62 and EventDate >= '2013-07-01 00:00:00' and EventDate <= '2013-07-15 00:00:00' and IsRefresh = 0 and DontCountHits = 0 | eval M = date_format(EventTime, '%Y-%m-%d %H:00:00') | stats count() as PageViews by M bucket_nullable=false | sort M | head 10 from 1000"
      },
      "assertions": [
        {
          "property": "meta.total",
          "condition": "==",
          "value": 0
        }
      ]
    }
